# 复现网易云音乐

**技术栈： React + antd + axios + redux**

## 项目简介
* 项目目的是为了练习学习的React框架，巩固基础和在项目中发现问题并解决
* 项目是多人开发，在前后端交流中收获了共同开发的经验
* 接口说明：工作室的后端同学提供（数据基本都过期了）
* 项目进行了一个月左右时间（2024.10 - 2024.11）



## 实现部分

* 基本还原了网易云音乐首页，个人主页，专辑样式
* 因为专辑，歌单，歌手等样式基本一致，所以没有重复实现
* 使用HTML5的audio标签实现了音频播放



### 1.轮播图

* 轮播图完全还原了网易云音乐首页轮播动画
* 自动切换和淡入淡出动画（类名增删来实现的）
* 点击切换（会马上结束正在进行的动画）
  * 正在进行动画要切换到下一张
  * 点击后会跳过动画时间，直接下一张

### 2.歌单部分

基本的两栏布局 + 列表展示

### 3.个人主页部分

* 和网易云音乐的登录后个人主页几乎一致
* 个人信息展示
* 音乐喜好
* 修改个人信息

### 4.登录注册

* 进入项目会先进行登录
* 基础流程的登录和注册
* 长期登录（只有单token，所以使用了localStorage，其实是不安全的）



## 总结

### 1.函数封装
**使用axios封装网络请求类**
* 基础url
* 发送网络请求的方式（get，post）

**封装工具函数和网络请求函数**
1. 解码jwt查看当前token是否过期
2. 将字符串转换成对象的形式（为了在jsx中写svg图标的属性更方便一点）
3. 获取对应url的数据的函数，方便在使用的时候派发或者调用

### 2.使用redux管理状态（为了练习，两种都用了）
* 基础写法
* RTK

### 3.实现长期登录（只提供了半小时有效的一个token）

思路：使用后端提供的短期有效的 token，**定期在后台刷新token**

* 登录的时候用localStorage存储
* 定期检查token是否过期
* 过期了重新发送登录请求更新token，保持token一直有效

**单token七天免登录**

* 第一次登录的时候把一个值存储到cookie
* 设置七天过期，过期后就不进行token刷新了
* 实际上这个实现方法是不安全的

**最好的方法是(双token)**

* 后端返回双token，提供access token和刷新令牌
* 前端使用**HTTP-only Cookie**存储刷新令牌
* 封装响应拦截器,错误码为401的时候获取刷新令牌刷新token，然后重试请求return axios(error.config)

### 4.组件库的使用
* 查看antd的组件库
* 导入目标组件使用
* 修改组件库的组件样式

### 5.掌握组件化开发的模式
* 在component文件夹中写好组件结构
* 在view文件夹中导入组件组成页面
* 在store中发送网络请求管理数据

### 6.巩固React基础知识
* React项目的创建，脚手架搭建项目
* hook的使用和自定义hook
* react-router路由配置部分
* 组件通信

### 7.git
* git仓库建立和基础知识
* 代码提交commit规范
* 合并冲突

### 8.npm
* 学习npm包管理工具
* 本地启动项目和部署之后项目的一些区别
  * 本地修改代码保存为什么可以直接更改（本地启动服务快速打包）
  * 部署上线的流程



















